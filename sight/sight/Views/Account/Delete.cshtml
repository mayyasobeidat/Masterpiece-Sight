@model sight.Models.comment
@using Microsoft.AspNet.Identity

@{
    ViewBag.Title = "Delete";
    Layout = "~/Views/Shared/_LayoutUsersPages.cshtml";
}


<style>
    .details {
        font-size: 14px;
        color: #4a4a4a;
    }

    @@import url('https://fonts.googleapis.com/css?family=Montserrat');

    .bbb {
        background-image: url("conn.png");
        background-size: cover;
    }

    .bookCard {
        width: 60%;
        padding: 4.5%;
    }

    @@media only screen and (min-device-width: 481px) and (max-device-width:768px) {

        .bookCard {
            width: 90%;
            padding: 10%;
        }
    }

    @@media only screen and (min-device-width: 0px) and (max-device-width:480px) {

        .bookCard {
            width: 90%;
            padding: 10%;
        }
    }
</style>



@if (User.Identity.IsAuthenticated)
{
    sight.Models.sightEntities db = new sight.Models.sightEntities();
    var comment = db.comments.ToList();

    if (User.IsInRole("Photographer"))

    {

        int x = ViewBag.id;


        string currentUserId = User.Identity.GetUserId(); // افتراضي اسم الدالة هو GetUserId
        int iduserph = db.photographers.FirstOrDefault(a => a.user_id == currentUserId).id;
        var booking = db.comments.FirstOrDefault(b => b.id == x && (b.photographer_id == iduserph));

        if (Model.photographer_id == iduserph)
        {
            <main id="main" class="main" style="padding-top: 60px;">

                <div class="container">


                    <section class="section profile">



                        <div class="row d-flex align-items-center justify-content-center">

                            <div class="card bookCard">



                                <div id="form3">


                                    <h3>Are you sure you want to delete this comment?</h3>




                                    <div>
                                        <hr />
                                        <table class="table table-striped">
                                            <tbody>

                                                <tr>
                                                    <th>
                                                        Status
                                                    </th>
                                                    <td>
                                                        @if (Model.is_approved == true)
                                                        {
                                                            <span>Accept</span>
                                                        }
                                                        else if (Model.is_approved == false)
                                                        {
                                                            <span>Not Accept</span>
                                                        }


                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Comment Date
                                                    </th>
                                                    <td>
                                                        @String.Format("{0:MM/dd/yyyy}", Model.created_at)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Comment
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.comment1)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Client Name
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.client.fullName)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Photographer
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.photographer.FullName)
                                                    </td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>


                                    <div>


                                        @using (Html.BeginForm())
                                        {
                                            @Html.AntiForgeryToken()

                                            <div class="form-actions no-color">
                                                <input type="submit" value="Delete" class="btn btn-danger" /> |


                                                @if (User.IsInRole("Photographer"))
                                                {
                                                    @Html.ActionLink("Back", "Edit", "photographersProfile")

                                                }
                                                else if (User.IsInRole("Client"))
                                                {
                                                    @Html.ActionLink("Back", "Edit", "Clients")

                                                }

                                            </div>
                                        }
                                    </div>

                                </div>


                            </div>
                        </div>

                    </section>

                </div>
            </main>

        }
        else
        {
            <main id="main" class="main" style="padding-top: 60px;">

                <div class="container">


                    <section class="section profile">



                        <div class="row d-flex align-items-center justify-content-center">

                            <div class="card bookCard">



                                <div id="form3">



                                    <div>
                                        <hr />
                                        <h1>This information is private</h1>

                                    </div>




                                    <div>


                                        <div class="form-actions no-color">


                                            @if (User.IsInRole("Photographer"))
                                            {
                                                @Html.ActionLink("Back", "Edit", "photographersProfile")

                                            }
                                            else if (User.IsInRole("Client"))
                                            {
                                                @Html.ActionLink("Back", "Edit", "Clients")

                                            }

                                        </div>

                                    </div>

                                </div>


                            </div>
                        </div>

                    </section>

                </div>
            </main>

        }
    }
    else if (User.IsInRole("Client"))
    {
        int x = ViewBag.id;

        string currentUserId = User.Identity.GetUserId(); // افتراضي اسم الدالة هو GetUserId
        int iduser = db.clients.FirstOrDefault(a => a.user_id == currentUserId).id;
        var booking = db.comments.FirstOrDefault(b => b.id == x && (b.client_id == iduser));

        if (Model.client_id == iduser)
        {
            <main id="main" class="main" style="padding-top: 60px;">

                <div class="container">


                    <section class="section profile">



                        <div class="row d-flex align-items-center justify-content-center">

                            <div class="card bookCard">



                                <div id="form3">


                                    <h3>Are you sure you want to delete this comment?</h3>




                                    <div>
                                        <hr />
                                        <table class="table table-striped">
                                            <tbody>

                                                <tr>
                                                    <th>
                                                        Status
                                                    </th>
                                                    <td>
                                                        @if (Model.is_approved == true)
                                                        {
                                                            <span>Accept</span>
                                                        }
                                                        else if (Model.is_approved == false)
                                                        {
                                                            <span>Not Accept</span>
                                                        }


                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Comment Date
                                                    </th>
                                                    <td>
                                                        @String.Format("{0:MM/dd/yyyy}", Model.created_at)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Comment
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.comment1)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Client Name
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.client.fullName)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Photographer
                                                    </th>
                                                    <td>
                                                        @Html.DisplayFor(model => model.photographer.FullName)
                                                    </td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>


                                    <div>


                                        @using (Html.BeginForm())
                                        {
                                            @Html.AntiForgeryToken()

                                            <div class="form-actions no-color">
                                                <input type="submit" value="Delete" class="btn btn-danger" /> |


                                                @if (User.IsInRole("Photographer"))
                                                {
                                                    @Html.ActionLink("Back", "Edit", "photographersProfile")

                                                }
                                                else if (User.IsInRole("Client"))
                                                {
                                                    @Html.ActionLink("Back", "Edit", "Clients")

                                                }

                                            </div>
                                        }
                                    </div>

                                </div>


                            </div>
                        </div>

                    </section>

                </div>
            </main>

        }
        else
        {
            <main id="main" class="main" style="padding-top: 60px;">

                <div class="container">


                    <section class="section profile">



                        <div class="row d-flex align-items-center justify-content-center">

                            <div class="card bookCard">



                                <div id="form3">



                                    <div>
                                        <hr />
                                        <h1>This information is private</h1>

                                    </div>




                                    <div>


                                        <div class="form-actions no-color">


                                            @if (User.IsInRole("Photographer"))
                                            {
                                                @Html.ActionLink("Back", "Edit", "photographersProfile")

                                            }
                                            else if (User.IsInRole("Client"))
                                            {
                                                @Html.ActionLink("Back", "Edit", "Clients")

                                            }

                                        </div>

                                    </div>

                                </div>


                            </div>
                        </div>

                    </section>

                </div>
            </main>

        }
    }
}
<!-- End #main -->
